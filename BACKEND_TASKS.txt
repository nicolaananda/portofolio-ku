================================================================================
                    BACKEND TASKS - IMAGE UPLOAD FEATURE
================================================================================
                     Due Date: [TENTATIF - Set dengan tim]
                     Priority: HIGH
                     Module: Portfolio Image Upload
================================================================================

üìã OVERVIEW
-----------
Implementasi endpoint untuk upload gambar portfolio ke Cloudflare R2 menggunakan
Multer. Gambar akan digunakan untuk portfolio items.


üéØ OBJECTIVES
------------
1. Membuat API endpoint POST /api/upload
2. Integrasi Cloudflare R2 untuk storage
3. Validasi file image (type & size)
4. Return public URL gambar


üì¶ REQUIRED DEPENDENCIES
------------------------
Install packages berikut:
- multer (file upload middleware)
- @aws-sdk/client-s3 (Cloudflare R2 client)
- uuid (generate unique filenames)

Command:
  npm install multer @aws-sdk/client-s3 uuid
  npm install --save-dev @types/multer


üîê STEP 1: SETUP CLOUDFLARE R2
------------------------------
Task ID: TASK-001
Status: [ ] TODO
Priority: CRITICAL

Description:
1. Login ke Cloudflare Dashboard
2. Navigate ke R2 Object Storage
3. Create new bucket dengan nama: "portfolio-images" (atau sesuai)
4. Set bucket to PUBLIC ACCESS (di Settings)
5. Generate API Token untuk R2:
   - Go to "Manage R2 API Tokens"
   - Click "Create API Token"
   - Permissions: "Object Read & Write" atau "Admin"
   - Save credentials: Account ID, Access Key ID, Secret Access Key
6. Get Public URL dari bucket:
   - R2 URL: https://pub-[account-id].r2.dev
   - ATAU setup custom domain (recommended)

Deliverables:
  [ ] R2 Bucket created
  [ ] API credentials obtained
  [ ] Public URL documented
  [ ] Credentials added to .env (see STEP 2)

Time Estimate: 30 minutes
Notes: Simpan credentials dengan aman, jangan commit ke git


üîë STEP 2: ENVIRONMENT VARIABLES
---------------------------------
Task ID: TASK-002
Status: [ ] TODO
Priority: CRITICAL

Description:
Add environment variables untuk R2 configuration di file .env

Required Variables:
  R2_ACCOUNT_ID=your-account-id
  R2_ACCESS_KEY_ID=your-access-key-id
  R2_SECRET_ACCESS_KEY=your-secret-access-key
  R2_BUCKET_NAME=portfolio-images
  R2_PUBLIC_URL=https://your-public-url.com

Deliverables:
  [ ] Variables added to .env
  [ ] Variables added to .env.example (tanpa credentials)
  [ ] Config documented

Time Estimate: 10 minutes
Notes: Jangan commit credentials ke git


üìÅ STEP 3: CREATE ROUTES DIRECTORY
-----------------------------------
Task ID: TASK-003
Status: [ ] TODO
Priority: MEDIUM

Description:
Create upload routes file: routes/upload.routes.js

File Structure:
  backend/
  ‚îú‚îÄ‚îÄ routes/
  ‚îÇ   ‚îú‚îÄ‚îÄ upload.routes.js  <-- CREATE THIS
  ‚îÇ   ‚îú‚îÄ‚îÄ portfolio.routes.js
  ‚îÇ   ‚îî‚îÄ‚îÄ ...
  ‚îî‚îÄ‚îÄ middleware/
      ‚îî‚îÄ‚îÄ auth.js

Deliverables:
  [ ] File created: routes/upload.routes.js
  [ ] Basic router setup completed

Time Estimate: 5 minutes


üíª STEP 4: IMPLEMENT UPLOAD ROUTE
----------------------------------
Task ID: TASK-004
Status: [ ] TODO
Priority: CRITICAL
Estimated Time: 2-3 hours

Description:
Implement API endpoint POST /api/upload

Requirements:
1. Use Multer untuk handle multipart/form-data
2. Use memory storage (tidak save ke disk)
3. Upload file ke Cloudflare R2
4. Return public URL
5. Include authentication middleware
6. Handle errors properly

Acceptance Criteria:
  ‚úÖ Endpoint accept file via field name "image"
  ‚úÖ File type validation (JPG, PNG, GIF, WebP only)
  ‚úÖ File size validation (max 5MB)
  ‚úÖ Require authentication (Bearer token)
  ‚úÖ Return URL in format: { "url": "..." }
  ‚úÖ Handle all error cases
  ‚úÖ Unique filename generation (UUID)

Test Cases:
  - Upload valid image ‚Üí 200 OK with URL
  - Upload without auth ‚Üí 401 Unauthorized
  - Upload invalid file type ‚Üí 400 Bad Request
  - Upload file > 5MB ‚Üí 413 Payload Too Large
  - Upload without file ‚Üí 400 No file uploaded

Code Reference: See BACKEND_UPLOAD_REQUIREMENTS.md

Deliverables:
  [ ] Upload route implemented
  [ ] S3Client configured for R2
  [ ] Multer middleware configured
  [ ] uploadToR2 helper function created
  [ ] Error handling implemented
  [ ] Authentication middleware integrated

Time Estimate: 2-3 hours
Dependencies: TASK-001, TASK-002, TASK-003


üîó STEP 5: CONNECT ROUTE TO APP
---------------------------------
Task ID: TASK-005
Status: [ ] TODO
Priority: HIGH

Description:
Add upload route to main Express app

File: app.js or server.js or index.js

Add this line:
  const uploadRoutes = require('./routes/upload.routes');
  
  // After other routes
  app.use('/api/upload', uploadRoutes);

Deliverables:
  [ ] Route connected to /api/upload
  [ ] Server restarted
  [ ] Route accessible

Time Estimate: 5 minutes
Dependencies: TASK-004


‚úÖ STEP 6: TESTING
-------------------
Task ID: TASK-006
Status: [ ] TODO
Priority: HIGH
Estimated Time: 1 hour

Test Cases:
1. Manual Testing dengan Postman/cURL
2. Test dengan Frontend (jika sudah ada)
3. Test error scenarios
4. Verify files uploaded ke R2
5. Test CORS configuration

Test Commands:

  # Test 1: Upload valid image
  curl -X POST http://localhost:5002/api/upload \
    -H "Authorization: Bearer YOUR_TOKEN" \
    -F "image=@/path/to/image.jpg"

  # Test 2: Without authentication
  curl -X POST http://localhost:5002/api/upload \
    -F "image=@/path/to/image.jpg"

  # Test 3: Invalid file type
  curl -X POST http://localhost:5002/api/upload \
    -H "Authorization: Bearer YOUR_TOKEN" \
    -F "image=@/path/to/document.pdf"

Expected Results:
  Test 1: 200 OK, return URL
  Test 2: 401 Unauthorized
  Test 3: 400 Bad Request (Invalid file type)

Deliverables:
  [ ] All tests passing
  [ ] Files visible di R2 dashboard
  [ ] Public URLs accessible
  [ ] Error handling works correctly

Time Estimate: 1 hour
Dependencies: TASK-005


üõ°Ô∏è STEP 7: CORS CONFIGURATION
-------------------------------
Task ID: TASK-007
Status: [ ] TODO
Priority: MEDIUM

Description:
Setup CORS di Cloudflare R2 bucket untuk allow frontend access

Steps:
1. Go to R2 Dashboard
2. Select your bucket
3. Go to Settings > CORS
4. Add CORS policy (see BACKEND_UPLOAD_REQUIREMENTS.md)

Note: Ini untuk GET requests, upload tidak perlu CORS khusus

Deliverables:
  [ ] CORS configured di R2
  [ ] Frontend can access uploaded images

Time Estimate: 10 minutes


üîí STEP 8: SECURITY & OPTIMIZATION (OPTIONAL)
----------------------------------------------
Task ID: TASK-008
Status: [ ] TODO (Optional)
Priority: LOW

Description:
Implement security improvements dan optimizations

Features:
1. Rate Limiting untuk upload endpoint
2. Image compression/optimization (optional)
3. File cleanup script untuk orphaned files
4. Virus scanning (advanced)

Commands for Rate Limiting:
  npm install express-rate-limit

Code Reference: See BACKEND_UPLOAD_REQUIREMENTS.md section "Additional Recommendations"

Deliverables:
  [ ] Rate limiting implemented (optional)
  [ ] Image optimization implemented (optional)

Time Estimate: 2-3 hours
Dependencies: TASK-006


üìù STEP 9: DOCUMENTATION
------------------------
Task ID: TASK-009
Status: [ ] TODO
Priority: LOW

Description:
Update API documentation dengan endpoint baru

Deliverables:
  [ ] API documentation updated
  [ ] Request/Response examples documented
  [ ] Error codes documented
  [ ] Instructions for frontend team

Time Estimate: 30 minutes
Dependencies: TASK-006


================================================================================
                            TESTING CHECKLIST
================================================================================

Functional Tests:
  [ ] Upload valid JPG image
  [ ] Upload valid PNG image
  [ ] Upload valid GIF image
  [ ] Upload valid WebP image
  [ ] Reject PDF file
  [ ] Reject TXT file
  [ ] Reject file > 5MB
  [ ] Upload without authentication
  [ ] Upload with invalid token
  [ ] Multiple files upload (if supported)

Technical Tests:
  [ ] File appears in R2 bucket
  [ ] URL is publicly accessible
  [ ] Response format matches spec
  [ ] Error responses match spec
  [ ] Server logs error correctly
  [ ] Memory cleanup after upload
  [ ] Unique filenames generated

Integration Tests:
  [ ] Frontend can upload image
  [ ] Uploaded image appears in portfolio
  [ ] Edit portfolio with new image
  [ ] Delete portfolio removes image (future task)


================================================================================
                            DELIVERABLES SUMMARY
================================================================================

Code Deliverables:
  [ ] routes/upload.routes.js
  [ ] Updated app.js (with route connection)
  [ ] Updated .env.example
  [ ] Upload tests

Environment Setup:
  [ ] R2 bucket created
  [ ] Environment variables configured
  [ ] CORS configured

Documentation:
  [ ] API documentation updated
  [ ] Testing checklist completed
  [ ] Handoff notes for frontend team


================================================================================
                            ESTIMATED TIMELINE
================================================================================

Phase 1: Setup (30 mins)
  - TASK-001: R2 Setup
  - TASK-002: Environment Variables
  - TASK-003: Create Routes Directory

Phase 2: Implementation (2-3 hours)
  - TASK-004: Implement Upload Route
  - TASK-005: Connect Route

Phase 3: Testing (1 hour)
  - TASK-006: Testing
  - TASK-007: CORS Configuration

Phase 4: Polish (Optional, 1 hour)
  - TASK-008: Security & Optimization
  - TASK-009: Documentation

TOTAL ESTIMATED TIME: 4-5 hours


================================================================================
                            HANDOFF NOTES FOR FRONTEND
================================================================================

‚úÖ Frontend sudah siap menerima URL dari backend:

1. Endpoint: POST /api/upload
2. Headers:
   - Authorization: Bearer <token>
3. Body: multipart/form-data dengan field "image"
4. Response: { "url": "https://..." }
5. Max file size: 5MB
6. Allowed formats: JPG, PNG, GIF, WebP

Frontend component sudah dibuat: src/components/ImageUpload.tsx
Portfolio pages sudah updated: PortfolioCreatePage, PortfolioEditPage

Lihat: BACKEND_QUICK_START.md untuk quick implementation guide


================================================================================
                            NOTES
================================================================================

- Simpan semua credentials di .env, jangan commit ke git
- Test dengan multiple file types
- Monitor R2 storage usage
- Consider implementing image optimization later
- Setup monitoring untuk upload failures
- Document troubleshooting steps

================================================================================
                            END OF TASK LIST
================================================================================


================================================================================
                    BACKEND TASKS - PORTFOLIO SLUG FEATURE
================================================================================
                     Due Date: [TENTATIF - Set dengan tim]
                     Priority: HIGH
                     Module: Portfolio Slug Implementation
================================================================================

üìã OVERVIEW
-----------
Implementasi slug berbasis judul portfolio untuk URL yang lebih SEO-friendly
dan user-friendly. Mengganti penggunaan _id (MongoDB ObjectId) dengan slug
yang di-generate dari judul portfolio.

Contoh:
  - Sebelum: /portfolio/64f8a1b2c3d4e5f6a7b8c9d0
  - Sesudah: /portfolio/e-commerce-website-development


üéØ OBJECTIVES
------------
1. Generate slug dari judul portfolio (auto-generate)
2. Store slug di database schema
3. Support fetching portfolio by slug (prioritas) atau _id (backward compatibility)
4. Ensure slug uniqueness
5. Auto-update slug saat judul diubah


üì¶ REQUIRED DEPENDENCIES
------------------------
Install package berikut (jika belum ada):
- slugify (generate URL-friendly slugs)

Command:
  npm install slugify


üîß STEP 1: UPDATE DATABASE SCHEMA
----------------------------------
Task ID: TASK-SLUG-001
Status: [ ] TODO
Priority: CRITICAL

Description:
Update Portfolio model/schema untuk menambahkan field `slug`

Schema Changes:
  - Add field: `slug` (String, unique, required)
  - Add index: `{ slug: 1 }` untuk performa query
  - Auto-generate slug dari title jika tidak disediakan

Mongoose Example:
  slug: {
    type: String,
    required: true,
    unique: true,
    lowercase: true,
    trim: true
  }

MongoDB Index:
  db.portfolios.createIndex({ slug: 1 }, { unique: true })

Migration Strategy:
  1. Add slug field ke schema
  2. Generate slug untuk semua portfolio yang sudah ada
  3. Set slug sebagai unique
  4. Add index

Deliverables:
  [ ] Schema updated dengan slug field
  [ ] Index created untuk slug
  [ ] Migration script untuk existing portfolios
  [ ] All existing portfolios have slugs

Time Estimate: 30 minutes
Notes: Pastikan backward compatibility tetap terjaga


üîß STEP 2: CREATE SLUG UTILITY FUNCTION
----------------------------------------
Task ID: TASK-SLUG-002
Status: [ ] TODO
Priority: CRITICAL

Description:
Create helper function untuk generate slug dari title

Requirements:
1. Function: `generateSlug(title)`
2. Use slugify library
3. Handle special characters
4. Ensure lowercase
5. Trim whitespace
6. Handle Indonesian characters (optional)

Example Implementation:
  const slugify = require('slugify');

  function generateSlug(title) {
    return slugify(title, {
      lower: true,
      strict: true,
      remove: /[*+~.()'"!:@]/g,
      locale: 'id' // Support Indonesian characters
    });
  }

  // Handle uniqueness
  async function generateUniqueSlug(title, existingId = null) {
    let baseSlug = generateSlug(title);
    let slug = baseSlug;
    let counter = 1;
    
    while (true) {
      const existing = await Portfolio.findOne({ 
        slug,
        _id: { $ne: existingId } 
      });
      
      if (!existing) break;
      
      slug = `${baseSlug}-${counter}`;
      counter++;
    }
    
    return slug;
  }

Deliverables:
  [ ] slugUtils.js atau helper function created
  [ ] generateSlug function implemented
  [ ] generateUniqueSlug function implemented
  [ ] Tests untuk slug generation

Time Estimate: 30 minutes


üíª STEP 3: UPDATE CREATE PORTFOLIO ENDPOINT
--------------------------------------------
Task ID: TASK-SLUG-003
Status: [ ] TODO
Priority: CRITICAL
Estimated Time: 45 minutes

Description:
Update POST /api/portfolio untuk auto-generate slug dari title

Requirements:
1. Auto-generate slug dari title saat create
2. Validate slug uniqueness
3. Return slug dalam response
4. Handle edge cases (empty title, special characters)

Changes to Controller:
  - Before saving portfolio, generate slug
  - If slug provided in request, use it (optional)
  - Otherwise, auto-generate dari title
  - Ensure uniqueness

Request Body (Updated):
  {
    "title": "E-Commerce Website Development",  // Required
    "slug": "e-commerce-website",                // Optional (auto-generated if not provided)
    "category": "web",
    ...
  }

Response (Updated):
  {
    "status": "success",
    "data": {
      "_id": "...",
      "slug": "e-commerce-website-development",  // NEW
      "title": "E-Commerce Website Development",
      ...
    }
  }

Deliverables:
  [ ] Create endpoint updated
  [ ] Slug auto-generation implemented
  [ ] Uniqueness validation added
  [ ] Response includes slug
  [ ] Error handling for duplicate slugs

Time Estimate: 45 minutes
Dependencies: TASK-SLUG-001, TASK-SLUG-002


üíª STEP 4: UPDATE GET PORTFOLIO BY SLUG/ID ENDPOINT
----------------------------------------------------
Task ID: TASK-SLUG-004
Status: [ ] TODO
Priority: CRITICAL
Estimated Time: 1 hour

Description:
Update GET /api/portfolio/:identifier untuk support both slug dan _id

Requirements:
1. Support fetching by slug (priority)
2. Maintain backward compatibility dengan _id
3. Check if identifier is valid ObjectId
4. If ObjectId ‚Üí query by _id
5. If not ObjectId ‚Üí query by slug

Route: GET /api/portfolio/:identifier

Implementation Logic:
  - Check if identifier matches ObjectId format
  - If yes: query by _id
  - If no: query by slug
  - Return 404 if not found

Example Queries:
  GET /api/portfolio/e-commerce-website ‚Üí query by slug
  GET /api/portfolio/64f8a1b2c3d4e5f6a7b8c9d0 ‚Üí query by _id (backward compatibility)

Code Example:
  const mongoose = require('mongoose');

  // Check if identifier is ObjectId
  const isObjectId = mongoose.Types.ObjectId.isValid(identifier);
  
  let portfolio;
  if (isObjectId) {
    portfolio = await Portfolio.findById(identifier);
  } else {
    portfolio = await Portfolio.findOne({ slug: identifier });
  }
  
  if (!portfolio) {
    return res.status(404).json({
      status: 'error',
      message: 'No portfolio found with that identifier'
    });
  }

Deliverables:
  [ ] GET endpoint updated
  [ ] Support both slug and _id
  [ ] Backward compatibility maintained
  [ ] Error handling implemented
  [ ] Tests for both cases

Time Estimate: 1 hour
Dependencies: TASK-SLUG-001


üíª STEP 5: UPDATE UPDATE PORTFOLIO ENDPOINT
--------------------------------------------
Task ID: TASK-SLUG-005
Status: [ ] TODO
Priority: HIGH
Estimated Time: 45 minutes

Description:
Update PATCH /api/portfolio/:id untuk auto-update slug jika title berubah

Requirements:
1. If title is updated, regenerate slug
2. Maintain slug uniqueness (exclude current document)
3. Allow manual slug update (optional)
4. Validate slug format

Changes to Controller:
  - Check if title is being updated
  - If yes, regenerate slug (unless slug explicitly provided)
  - Validate new slug uniqueness
  - Update slug in database

Request Body (Updated):
  {
    "title": "Updated E-Commerce Website",  // If updated, slug will auto-regenerate
    "slug": "updated-slug",                 // Optional: manual slug override
    ...
  }

Deliverables:
  [ ] Update endpoint modified
  [ ] Auto-slug regeneration on title change
  [ ] Manual slug override support
  [ ] Uniqueness validation
  [ ] Tests for slug updates

Time Estimate: 45 minutes
Dependencies: TASK-SLUG-002, TASK-SLUG-003


üìä STEP 6: MIGRATION SCRIPT FOR EXISTING PORTFOLIOS
---------------------------------------------------
Task ID: TASK-SLUG-006
Status: [ ] TODO
Priority: HIGH
Estimated Time: 30 minutes

Description:
Create migration script untuk generate slug untuk semua portfolio yang sudah ada

Script Requirements:
1. Find all portfolios without slug
2. Generate slug dari title
3. Ensure uniqueness
4. Update all portfolios
5. Handle errors gracefully

Migration Script Example (scripts/migrate-portfolio-slugs.js):
  const Portfolio = require('./models/Portfolio');
  const { generateUniqueSlug } = require('./utils/slugUtils');

  async function migrateSlugs() {
    const portfolios = await Portfolio.find({ slug: { $exists: false } });
    
    console.log(`Found ${portfolios.length} portfolios without slugs`);
    
    for (const portfolio of portfolios) {
      try {
        const slug = await generateUniqueSlug(portfolio.title, portfolio._id);
        portfolio.slug = slug;
        await portfolio.save();
        console.log(`‚úì Updated ${portfolio.title} ‚Üí ${slug}`);
      } catch (error) {
        console.error(`‚úó Error updating ${portfolio.title}:`, error.message);
      }
    }
    
    console.log('Migration completed!');
  }

  migrateSlugs();

Run Command:
  node scripts/migrate-portfolio-slugs.js

Deliverables:
  [ ] Migration script created
  [ ] All existing portfolios have slugs
  [ ] Migration script tested
  [ ] Backup strategy documented

Time Estimate: 30 minutes
Dependencies: TASK-SLUG-001, TASK-SLUG-002


‚úÖ STEP 7: TESTING
-------------------
Task ID: TASK-SLUG-007
Status: [ ] TODO
Priority: HIGH
Estimated Time: 1 hour

Test Cases:

1. Create Portfolio with Auto-Generated Slug:
   POST /api/portfolio
   {
     "title": "My Awesome Project"
   }
   Expected: slug = "my-awesome-project"

2. Create Portfolio with Duplicate Title:
   POST /api/portfolio
   {
     "title": "My Awesome Project"
   }
   Expected: slug = "my-awesome-project-1" (auto-increment)

3. Get Portfolio by Slug:
   GET /api/portfolio/my-awesome-project
   Expected: 200 OK with portfolio data

4. Get Portfolio by _id (Backward Compatibility):
   GET /api/portfolio/64f8a1b2c3d4e5f6a7b8c9d0
   Expected: 200 OK with portfolio data

5. Update Portfolio Title (Auto-Update Slug):
   PATCH /api/portfolio/:id
   {
     "title": "Updated Title"
   }
   Expected: slug automatically updated

6. Update Portfolio with Manual Slug:
   PATCH /api/portfolio/:id
   {
     "slug": "custom-slug"
   }
   Expected: slug updated to "custom-slug"

7. Invalid Slug:
   GET /api/portfolio/non-existent-slug
   Expected: 404 Not Found

8. Special Characters in Title:
   POST /api/portfolio
   {
     "title": "Project #1: React & TypeScript!"
   }
   Expected: slug = "project-1-react-typescript"

Test Commands:

  # Test 1: Create with auto-slug
  curl -X POST http://localhost:5002/api/portfolio \
    -H "Authorization: Bearer TOKEN" \
    -H "Content-Type: application/json" \
    -d '{"title": "My Project", "category": "web", ...}'

  # Test 2: Get by slug
  curl http://localhost:5002/api/portfolio/my-project

  # Test 3: Get by _id
  curl http://localhost:5002/api/portfolio/64f8a1b2c3d4e5f6a7b8c9d0

  # Test 4: Update title (auto-update slug)
  curl -X PATCH http://localhost:5002/api/portfolio/:id \
    -H "Authorization: Bearer TOKEN" \
    -H "Content-Type: application/json" \
    -d '{"title": "Updated Title"}'

Deliverables:
  [ ] All test cases passing
  [ ] Backward compatibility verified
  [ ] Slug uniqueness verified
  [ ] Error handling tested
  [ ] Performance tested

Time Estimate: 1 hour
Dependencies: TASK-SLUG-004, TASK-SLUG-005


üìù STEP 8: UPDATE API DOCUMENTATION
------------------------------------
Task ID: TASK-SLUG-008
Status: [ ] TODO
Priority: MEDIUM

Description:
Update README_Backend.md dengan dokumentasi slug feature

Documentation Updates:
1. Update GET /api/portfolio/:identifier endpoint
   - Explain slug and _id support
   - Provide examples
2. Update POST /api/portfolio endpoint
   - Document slug auto-generation
   - Optional slug parameter
3. Update PATCH /api/portfolio/:id endpoint
   - Document slug auto-update on title change
   - Manual slug override

Examples to Add:

GET /api/portfolio/:identifier
  - By slug: GET /api/portfolio/e-commerce-website
  - By _id: GET /api/portfolio/64f8a1b2c3d4e5f6a7b8c9d0

POST /api/portfolio
  Request Body:
  {
    "title": "My Project",
    "slug": "optional-custom-slug",  // Optional
    ...
  }

PATCH /api/portfolio/:id
  Request Body:
  {
    "title": "Updated Title",  // Will auto-update slug
    "slug": "custom-slug",     // Optional: manual override
    ...
  }

Deliverables:
  [ ] README_Backend.md updated
  [ ] API examples documented
  [ ] Slug generation rules documented
  [ ] Migration guide documented

Time Estimate: 30 minutes
Dependencies: TASK-SLUG-007


================================================================================
                            TESTING CHECKLIST - SLUG FEATURE
================================================================================

Functional Tests:
  [ ] Create portfolio with auto-generated slug
  [ ] Create portfolio with duplicate title (slug uniqueness)
  [ ] Get portfolio by slug
  [ ] Get portfolio by _id (backward compatibility)
  [ ] Update portfolio title (slug auto-update)
  [ ] Update portfolio with manual slug
  [ ] Handle special characters in title
  [ ] Handle Indonesian characters (optional)
  [ ] Handle empty title (should fail)
  [ ] Handle very long title (slug truncation)

Technical Tests:
  [ ] Slug field exists in database
  [ ] Slug index created and unique
  [ ] Migration script runs successfully
  [ ] All existing portfolios have slugs
  [ ] Slug format validation works
  [ ] Query performance with slug index

Integration Tests:
  [ ] Frontend can create portfolio (slug auto-generated)
  [ ] Frontend can access portfolio by slug
  [ ] Frontend can access portfolio by _id (backward compatibility)
  [ ] Frontend can update portfolio title (slug updates)
  [ ] SEO URLs working correctly


================================================================================
                            DELIVERABLES SUMMARY - SLUG FEATURE
================================================================================

Code Deliverables:
  [ ] Portfolio schema updated with slug field
  [ ] slugUtils.js helper functions
  [ ] Updated POST /api/portfolio (slug auto-generation)
  [ ] Updated GET /api/portfolio/:identifier (slug and _id support)
  [ ] Updated PATCH /api/portfolio/:id (slug auto-update)
  [ ] Migration script for existing portfolios
  [ ] Tests for all endpoints

Database Changes:
  [ ] Slug field added to portfolios collection
  [ ] Unique index on slug field
  [ ] All existing portfolios migrated with slugs

Documentation:
  [ ] README_Backend.md updated
  [ ] API examples with slug
  [ ] Migration guide documented


================================================================================
                            ESTIMATED TIMELINE - SLUG FEATURE
================================================================================

Phase 1: Setup (1 hour)
  - TASK-SLUG-001: Update Database Schema
  - TASK-SLUG-002: Create Slug Utility Functions

Phase 2: Implementation (2.5 hours)
  - TASK-SLUG-003: Update Create Endpoint
  - TASK-SLUG-004: Update Get Endpoint
  - TASK-SLUG-005: Update Update Endpoint

Phase 3: Migration (30 mins)
  - TASK-SLUG-006: Migration Script

Phase 4: Testing & Documentation (1.5 hours)
  - TASK-SLUG-007: Testing
  - TASK-SLUG-008: Documentation

TOTAL ESTIMATED TIME: 5-6 hours


================================================================================
                            HANDOFF NOTES FOR FRONTEND - SLUG FEATURE
================================================================================

‚úÖ Frontend perlu di-update untuk menggunakan slug:

1. **URL Format Berubah:**
   - Sebelum: `/portfolio/64f8a1b2c3d4e5f6a7b8c9d0`
   - Sesudah: `/portfolio/e-commerce-website-development`

2. **Backend Support Both:**
   - GET /api/portfolio/:identifier support both slug dan _id
   - Backward compatibility tetap terjaga
   - Frontend bisa langsung pakai slug

3. **Create/Update Portfolio:**
   - Slug akan auto-generate dari title
   - Tidak perlu kirim slug dari frontend (optional)
   - Response akan include slug

4. **Routes Update:**
   - Route: `/portfolio/:slug` (bukan :id lagi)
   - atau tetap `/portfolio/:id` tapi isi dengan slug

5. **SEO Benefits:**
   - URL lebih SEO-friendly
   - User-friendly (readable)
   - Shareable links lebih baik

Frontend Changes Needed:
  - Update PortfolioPage.tsx: use slug instead of _id
  - Update PortfolioDetailPage.tsx: use slug from params
  - Update all portfolio links: use slug
  - Update SEOHead: use slug in URL
  - Update sitemap.xml: use slugs


================================================================================
                            NOTES - SLUG FEATURE
================================================================================

- Slug harus unique, backend akan handle auto-increment jika duplicate
- Slug case-insensitive (always lowercase)
- Special characters akan di-convert menjadi hyphens
- Indonesian characters support (optional, depends on slugify config)
- Slug tidak bisa diubah manual kecuali melalui endpoint update
- Pastikan migration script di-run sebelum deploy
- Monitor slug generation untuk edge cases
- Consider slug history jika title sering berubah


================================================================================
                            END OF SLUG TASK LIST
================================================================================

